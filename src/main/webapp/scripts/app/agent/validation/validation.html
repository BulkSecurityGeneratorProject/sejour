<div ng-cloak>
    <div class="row title-main title-underline">
    	<h4 translate="agent.title.{{application.type}}.{{application.nature}}" translate-values="{ studentName: '{{studentName}}'}"></h4>
    </div>
	<br><br>
	
	<div class="row">
		<div class="col-xs-6 col-sm-5 col-sm-offset-1">
			<div class="collapsable-panel" ng-class="{'opened': identityOpened}" ng-click="identityOpened = !identityOpened">
				<div class="panel-heading">
					<span class="glyphicon" ng-class="{'glyphicon-triangle-top': identityOpened, 'glyphicon-triangle-bottom': !identityOpened}"></span>
					<h5 class="panel-title" translate="validation.form.identity">Identity</h5>
				</div>
			</div>
		</div>
		<div class="col-xs-6 validation-form">
			<img src="assets/images/checkbox_checked.png">
			<span translate="validation.form.validate" translate-values="{validationDate: '{{getFormattedDate(identityValidationDate)}}', validationAuthor: 'Ambassade de France à Séoul'}">validate</span>
		</div>
	</div>
	<div class="row" ng-show="identityOpened">
		<div class="col-sm-11 col-sm-offset-1">
			<div class="row validation-visualization-row" ng-class="{'opened': identityOpened}">
				<ng-include src="'scripts/app/application/identity/identity-view.html'"></ng-include>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-6 col-sm-5 col-sm-offset-1">
			<div class="collapsable-panel">
				<div class="panel-heading">
					<h5 class="panel-title" translate="validation.form.policeControl">Police Control</h5>
				</div>
			</div>
		</div>
		<div class="col-xs-6 validation-form">
			<img src="assets/images/checkbox_checked.png">
			<span translate="validation.form.validate" translate-values="{validationDate: '{{getFormattedDate(application.recevabilityDate)}}', validationAuthor: 'Police / Gendarmerie'}">validate</span>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-6 col-sm-5 col-sm-offset-1">
			<div class="collapsable-panel" ng-class="{'opened': projectOpened}" ng-click="projectOpened = !projectOpened">
				<div class="panel-heading">
					<span class="glyphicon" ng-class="{'glyphicon-triangle-top': projectOpened, 'glyphicon-triangle-bottom': !projectOpened}"></span>
					<h5 class="panel-title" translate="validation.form.project">Project</h5>
				</div>
			</div>
		</div>
		<div class="col-xs-6 validation-form">
			<img class="hand" src="assets/images/checkbox_unchecked.png" ng-show="!projectValidated" ng-click="projectValidated = !projectValidated; projectOpened = false;">
			<img class="hand" src="assets/images/checkbox_checked.png" ng-show="projectValidated" ng-click="projectValidated = !projectValidated">
			<span translate="validation.form.toValidate" ng-show="!projectValidated">To validate</span>
			<span translate="validation.form.validate" translate-values="{validationDate: '{{getFormattedDate(moment())}}', validationAuthor: 'Administration des étrangers en France'}" ng-show="projectValidated">validate</span>
		</div>
	</div>
	<div class="row" ng-show="projectOpened">
		<div class="col-sm-11 col-sm-offset-1">
			<div ng-if="application.type == 'Premiere'">
				<ul>
					<li translate="validation.form.preinscription" translate-values="{confirmationDate: '{{getFormattedDate(moment().subtract(4, 'd'))}}', confirmationAuthor: 'Campus France'}">validate</li>
				</ul>
			</div>
			<div class="row validation-visualization-row" ng-class="{'opened': projectOpened}">
				<ng-include src="'scripts/app/application/project/project-'+application.nature+'-view.html'"></ng-include>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-xs-6 col-sm-5 col-sm-offset-1">
			<div class="collapsable-panel">
				<div class="panel-heading">
					<h5 class="panel-title" translate="validation.form.history">History</h5>
				</div>
			</div>
		</div>
		<div class="col-xs-6 validation-form">
			<span translate="validation.form.noHistory" ng-if="history.length == 0">No history</span>
		</div>
	</div>
	<div class="row" ng-if="history.length != 0">
		<div class="col-sm-11 col-sm-offset-1">
			<div>
				<ul>
					<li ng-repeat="app in history">
						<a href="#" translate="validation.form.history.list" translate-values="{startDate: '{{app.startDate}}', endDate: '{{app.endDate}}'}">validate</a>
					</li>
				</ul>
			</div>
		</div>
	</div>
	<br>
	<br>
	<div class="row row-center">
    	<button class="btn btn-danger" translate="validation.form.button.decline">Decline</button>
    	<button class="btn btn-success btn-right"
    			translate="validation.form.button.accept"
    			ng-disabled="!projectValidated" 
    			ng-click="validate()" >Accept</button>
	</div>
</div>
    
<script type="text/javascript">
	$("html, body").animate({ scrollTop: 0 }, "slow");
</script>